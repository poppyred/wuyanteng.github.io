<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ha高可用之heartbeat-部署 | Gary Wu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="高级运维HA高可用双机热备" />
  
  
  
  
  <meta name="description" content="HA即(high available)高可用，又被叫做双机热备，用于关键性业务。简单理解就是，有2台机器 A 和 B，正常是 A 提供服务，B 待命闲置，当 A 宕机或服务宕掉，会切换至B机器继续提供服务。常见的实现高可用的开源软件有 heartbeat 和 keepalived。">
<meta name="keywords" content="高级运维,HA,高可用,双机热备">
<meta property="og:type" content="article">
<meta property="og:title" content="HA高可用之Heartbeat-部署">
<meta property="og:url" content="https://wuyanteng.github.io/2017/08/03/HA高可用之Heartbeat-部署/index.html">
<meta property="og:site_name" content="Gary Wu">
<meta property="og:description" content="HA即(high available)高可用，又被叫做双机热备，用于关键性业务。简单理解就是，有2台机器 A 和 B，正常是 A 提供服务，B 待命闲置，当 A 宕机或服务宕掉，会切换至B机器继续提供服务。常见的实现高可用的开源软件有 heartbeat 和 keepalived。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://raw.githubusercontent.com/wuyanteng/wuyanteng.github.io/master/images/heartbeat.png">
<meta property="og:image" content="https://raw.githubusercontent.com/wuyanteng/wuyanteng.github.io/master/images/heartbeat%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF.png">
<meta property="og:updated_time" content="2017-08-08T10:32:38.077Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HA高可用之Heartbeat-部署">
<meta name="twitter:description" content="HA即(high available)高可用，又被叫做双机热备，用于关键性业务。简单理解就是，有2台机器 A 和 B，正常是 A 提供服务，B 待命闲置，当 A 宕机或服务宕掉，会切换至B机器继续提供服务。常见的实现高可用的开源软件有 heartbeat 和 keepalived。">
<meta name="twitter:image" content="https://raw.githubusercontent.com/wuyanteng/wuyanteng.github.io/master/images/heartbeat.png">
  
    <link rel="alternate" href="/atom.xml" title="Gary Wu" type="application/atom+xml">
  

  

  <link rel="icon" href="/css/images/mylogo.jpg">
  <link rel="apple-touch-icon" href="/css/images/mylogo.jpg">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>
  <script src="/js/bootstrap.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    <link rel="stylesheet" href="/css/dialog.css">
  

  

  
    <link rel="stylesheet" href="/css/header-post.css" >
  

  
  
  

</head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  
  <div id="container">
    <div id="wrap">
      
        <header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">
          
          <div class="container"> 
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            
              <a class="brand" style="
                 margin-top: 0px;"  
                href="#" data-toggle="modal" data-target="#myModal" >
                  <img width="124px" height="124px" alt="Hike News" src="/css/images/mylogo.jpg">
              </a>
            
            
            <div class="navbar-collapse collapse">
              <ul class="hnav navbar-nav">
                
                  <li> <a class="main-nav-link" href="/">首页</a> </li>
                
                  <li> <a class="main-nav-link" href="/archives">归档</a> </li>
                
                  <li> <a class="main-nav-link" href="/categories">分类</a> </li>
                
                  <li> <a class="main-nav-link" href="/tags">标签</a> </li>
                
                  <li> <a class="main-nav-link" href="/about">关于</a> </li>
                
                  <li><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(无标题)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div></li>
            </div>
          </div>
                
      </div>
    </div>

</header>



      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-HA高可用之Heartbeat-部署" style="width: 75%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      HA高可用之Heartbeat-部署
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/08/03/HA高可用之Heartbeat-部署/" class="article-date">
	  <time datetime="2017-08-03T02:48:55.000Z" itemprop="datePublished">2017-08-03</time>
	</a>

      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>HA即(high available)高可用，又被叫做双机热备，用于关键性业务。简单理解就是，有2台机器 A 和 B，正常是 A 提供服务，B 待命闲置，当 A 宕机或服务宕掉，会切换至B机器继续提供服务。常见的实现高可用的开源软件有 heartbeat 和 keepalived。</p>
</blockquote>
<a id="more"></a>
<p><img src="https://raw.githubusercontent.com/wuyanteng/wuyanteng.github.io/master/images/heartbeat.png" alt="heartbeat"></p>
<blockquote>
<p>一台 web 服务器一天24小时提供web服务，难免会存在 web 服务挂掉或服务器宕机宕机的情况，那么用户就访问不了服务了，这当然不是我们期望的。</p>
<p>如果这样，有2台服务器，A对外提供 web 服务，B作为备用，如果A挂掉，那么B立刻替代A的位置去提供 web 服务，这样对用户来说是透明的。</p>
<p>但是有个问题，服务器A的 ip 是 10.0.10.24，服务器B的 ip 是10.0.10.25，显然向用户提供A或B的ip地址是不可行的，因为用户总不能去切换ip来访问的吧。这时heartbeat或keepalived可以提供一个虚拟IP：10.0.10.26，用户只需要访问 10.0.10.26，当A提供服务时，VIP 会设置在A服务器上；当B提供服务时，VIP会设置在B服务器上，这样就可以让用户通过访问10.0.10.26来获取web服务，即使A或B服务器切换也不影响用户的正常访问。</p>
</blockquote>
<h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><blockquote>
<p>环境</p>
</blockquote>
<pre><code>Web1:
主机名：hahb24_master
OS: CentOS 6.6
网卡IP：10.0.10.24
</code></pre><pre><code>Web2:
主机名：hahb25_slave
OS: CentOS 6.6
网卡IP：10.0.10.25
</code></pre><pre><code>虚拟VIP: 10.0.10.26
</code></pre><blockquote>
<p>配置主机名</p>
</blockquote>
<p>master节点配置</p>
<pre><code>[root@hahb24 ~]# vi /etc/sysconfig/network
HOSTNAME=hahb24_master
</code></pre><p>slave节点配置</p>
<pre><code>[root@hahb25 ~]# vi /etc/sysconfig/network
HOSTNAME=hahb24_slave
</code></pre><blockquote>
<p>关闭防火墙和selinux（所有节点配置）</p>
</blockquote>
<p>关闭iptables</p>
<pre><code>service iptables stop
</code></pre><p>关闭selinux</p>
<pre><code>setenforce 0
sed -i &#39;s/SELINUX=enforcing/SELINUX=disabled/&#39; /etc/selinux/config
</code></pre><blockquote>
<p>配置host(所有节点配置)</p>
</blockquote>
<pre><code>vim /etc/hosts
10.0.10.24 hahb24_master
10.0.10.25 hahb24_slave
</code></pre><blockquote>
<p>安装Hearbeat和Nginx（所有节点配置）</p>
</blockquote>
<pre><code> # 安装epel源
 yum install -y epel-release

 # 安装heartbeat和nginx
 yum install -y heartbeat* libnet nginx
</code></pre><p><br></p>
<h2 id="主master配置"><a href="#主master配置" class="headerlink" title="主master配置"></a>主master配置</h2><blockquote>
<p>heartbeat主要的配置文件有3个，分别是authkeys、ha.cf和haresources</p>
</blockquote>
<p>Authkeys文件:</p>
<pre><code>文件为heartbeat的认证文件，该文件主要是用于集群中两个节点的认证。该文件的属性必须为600，否则heartbeat启动将失败。两个节点的authkeys文件内容及权限相同。

目前提供了3种算法：crc/md5/sha1。其中crc不能够提供认证，它只能够用于校验数据包是否损坏，而sha1/md5需要一个密钥来进行认证，从资源消耗的角度来讲，md5消耗的比较多，sha1次之，因此建议一般使用sha1算法。
</code></pre><p>ha.cf文件:</p>
<pre><code>配置文件详解
vim ha.cf

debugfile /var/log/ha-debug：该文件保存heartbeat的调试信息。

logfile /var/log/ha-log：heartbeat的日志文件。

bcast eth0   表示在eth0接口上使用udp广播来通知心跳（把接口名称改为实际接口名称，比如:eth1）

#ucast eth0 10.0.10.25： 说明：采用网卡eth0的udp单播来通知心跳，eth0的IP

#mcast eth0 225.0.0.1 694 1 0 说明：采用udp多播播来通知心跳，建议在副节点不只一台时使用

keepalive 2：设定heartbeat之间的时间间隔为2秒。

deadtime 30： 在30秒后宣布节点死亡

warntime 10：超出该时间间隔未收到对方节点的心跳，则发出警告并记录到日志中。

initdead 120：
在某系统上，系统启动或重启之后需要经过一段时间网络才能正常工作，该选项用于解决这种情况产生的时间间隔，取值通常为deadtime的2倍。

udpport 694：设置广播通信使用的端口，694为默认使用的端口号。

node data-1-1  主节点主机名(必须与uname -n输出结果一致)
node data-1-2  从节点主机名(必须与uname -n输出结果一致)

nice_failback on【注释掉:auto_failback on；注：从节点无需配置该选项。】
主节点在正常情况下占用资源并运行所有的服务，遇到故障时把资源交给从节点由从节点运行服务。在该选项设为on的情况下，一旦主节点恢复运行，则自动获取资源并取代从节点，否则不取代从节点。

watchdog /dev/watchdog
说明：看门狗，如果本节点在超过一分钟后还没有发出心跳，那么本节点自动重启

##################################################################
下面是可选项
##################################################################

stonith baytech /etc/ha.d/conf/stonith.baytech 说明：主/副等所有节点的一种校验。

respawn hacluster /etc/init.d/nginx 说明：和heartbeat必须一起启动的本地服务

baud 19200  说明：串口波特率，与serial一起使用。

serial /dev/ttyS0    说明：采用串口来传递心跳信息。

ping 10.0.10.1   Ping一个非heartbeat服务器的IP，一般为同网段网关即可

respawn hacluster /usr/lib64/heartbeat/ipfail
使Heartbeat以hacluster的身份来执行该进程并监视该进程的执行情况，如果其死亡便重启之。最常用的进程是ipfail，该进程用于检测和处理网络故障，需要配合ping语句指定的ping node来检测网络连接。 注意：如果结束进程的退出代码为100，则不会重启该进程。
注：(1)如果你的系统是64bit，请注意该文件的路径。
    (2)hacluster是安装heartbeat生成的用户
</code></pre><p>haresources文件:</p>
<pre><code>添加如下行，例如：
hahb24_master 10.0.10.26/24/eth0/10.0.10.255 nginx

注：10.0.10.26/24是VIP地址，ech0是物理网卡名称，10.0.10.255是广播地址；nginx为heartbeat要监控的HA服务,可以有多个,中间使用空格分割

注意：两个集群节点上的该文件必须相同。
</code></pre><p>拷贝配置文件</p>
<pre><code>cd /usr/share/doc/heartbeat-3.0.4/
cp authkeys ha.cf haresources /etc/ha.d/
cd /etc/ha.d
</code></pre><p>修改authkeys</p>
<pre><code># 更改或增加如下内容
vim authkeys
auth 3
3 md5 Hello!
注：不论您在关键字auth后面指定的是什么索引值，在后面必须要作为键值再次出现。如果您指定“auth 4”，则在后面一定要有一行的内容为“4 ”。

# 然后修改其权限
chmod 600 authkeys
</code></pre><p>ha.cf文件修改</p>
<pre><code>[root@hahb24_master ha.d]# vim ha.cf
debugfile /var/log/ha-debug
logfile /var/log/ha-log
keepalive 2
deadtime 10
warntime 5
initdead 60
udpport 694
ucast eth0 10.0.10.25
auto_failback on
ping 10.0.10.1
node hahb24_master
node hahb25_slave
respawn hacluster /usr/lib64/heartbeat/ipfail
</code></pre><p>haresources文件修改</p>
<pre><code>[root@hahb24_master ha.d]# vim haresources

hahb24_master 10.0.10.26/24/eth0/10.0.10.255 nginx
注：10.0.10.26/24是VIP地址，ech0是物理网卡名称，10.0.10.255是广播地址；nginx为heartbeat要监控的HA服务,可以有多个,中间使用空格分割
</code></pre><h2 id="从节点配置"><a href="#从节点配置" class="headerlink" title="从节点配置"></a>从节点配置</h2><pre><code>把主节点上的三个配置文件拷贝到从节点的/etc/ha.d目录下
</code></pre><p>编辑ha.cf</p>
<pre><code>vim /etc/ha.d/ha.cf
将“ucast eth0 10.0.10.25” 改为 ucast eth0 10.0.10.24
</code></pre><p>检查authkeys文件权限</p>
<pre><code>ls -l authkeys 是否为600
</code></pre><p>编辑</p>
<pre><code>vim haresources 
hahb25_slave 10.0.10.26/24/eth0/10.0.10.255 nginx
</code></pre><h2 id="启动Heartbeat服务（所有节点）"><a href="#启动Heartbeat服务（所有节点）" class="headerlink" title="启动Heartbeat服务（所有节点）"></a>启动Heartbeat服务（所有节点）</h2><pre><code>chkconfig heartbeat on
/etc/init.d/heartbeat start

两台服务器服务都启动后，可以查看master辅助IP：  
[root@hahb24_master ha.d]# ip addr
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP qlen 1000
    link/ether 00:0c:29:43:b6:0f brd ff:ff:ff:ff:ff:ff
    inet 10.0.10.24/24 brd 10.0.10.255 scope global eth0
    inet 10.0.10.26/24 brd 10.0.10.255 scope global secondary eth0
    inet6 fe80::20c:29ff:fe43:b60f/64 scope link 
       valid_lft forever preferred_lft forever
</code></pre><h2 id="检查测试"><a href="#检查测试" class="headerlink" title="检查测试"></a>检查测试</h2><p>启动nginx服务(所有节点)</p>
<pre><code>chkconfig nginx on
chkconfig httpd off   如果有则关闭，我们使用nginx测试
/etc/init.d/nginx start
</code></pre><pre><code>为了能看出效果

#在master上添加
[root@hahb24_master]# echo &quot;1111111111master&quot; &gt; /usr/share/nginx/html/index.html 

#在slave上添加
[root@hahb25_slave ha.d]# echo &quot;22222222222222slave&quot; &gt;/usr/share/nginx/html/index.html

在浏览器输入http://10.0.10.26/index.html,此时的结果显示1111111111master则说明配置正确
</code></pre><blockquote>
<p>测试1：主节点停止heartbeat服务</p>
</blockquote>
<pre><code>[root@hahb24_master]# /etc/init.d/heartbeat stop

此时，再访问http://10.0.10.26/index.html,会显示 22222222222222slave
</code></pre><blockquote>
<p>测试2：测试脑裂</p>
</blockquote>
<pre><code>主节点master和从节点slave都down掉eth0网卡
[root@hahb24_master ~]# ifdown eth0
[root@hahb25_slave ~]# ifdown eth0

然后先启动master（10.0.10.24） eth0的网卡，你会发现网页依然无法访问，因为slave（10.0.10.25）目前依然是master模式。
最后启动，10.0.10.25的eth0网卡，服务恢复访问，访问结果是22222222222222slave
</code></pre><blockquote>
<p>测试3：VIP漂移后，主master恢复后自动抢占。</p>
</blockquote>
<pre><code>#master节点
[root@hahb24_master ~]# ifdown eth0
此时，访问web已经转移到了slave2服务器。
这时候把master服务器重新激活网卡并启动master heartbeat服务，稍等片刻，VIP又漂移回来了，访问的web资源是master的web资源，测试成功！

</code></pre><h4 id="工作中Heartbeat使用场景-HA高可用"><a href="#工作中Heartbeat使用场景-HA高可用" class="headerlink" title="工作中Heartbeat使用场景 - HA高可用"></a>工作中Heartbeat使用场景 - HA高可用</h4><p><img src="https://raw.githubusercontent.com/wuyanteng/wuyanteng.github.io/master/images/heartbeat%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF.png" alt="heartbeat场景"></p>

      
    </div>
    <footer class="article-footer">
      
      
        
	<div id="comment">
		<!-- 来必力City版安装代码 -->
		<div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5">
		<script type="text/javascript">
		   (function(d, s) {
		       var j, e = d.getElementsByTagName(s)[0];

		       if (typeof LivereTower === 'function') { return; }

		       j = d.createElement(s);
		       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
		       j.async = true;

		       e.parentNode.insertBefore(j, e);
		   })(document, 'script');
		</script>
		<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
		</div>
		<!-- City版安装代码已完成 -->
	</div>



      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HA/">HA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/双机热备/">双机热备</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/高可用/">高可用</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/高级运维/">高级运维</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/08/03/使用nginx实现HTTP负载均衡-官网翻译版/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          使用nginx实现HTTP负载均衡-官网翻译版
        
      </div>
    </a>
  
  
    <a href="/2017/08/02/Cacti实战-交换机接口显示错误以及流量断图/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">Cacti实战-交换机接口显示错误以及流量断图</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="toc-sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#部署"><span class="nav-number">1.</span> <span class="nav-text">部署</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#主master配置"><span class="nav-number">2.</span> <span class="nav-text">主master配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#从节点配置"><span class="nav-number">3.</span> <span class="nav-text">从节点配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#启动Heartbeat服务（所有节点）"><span class="nav-number">4.</span> <span class="nav-text">启动Heartbeat服务（所有节点）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#检查测试"><span class="nav-number">5.</span> <span class="nav-text">检查测试</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#工作中Heartbeat使用场景-HA高可用"><span class="nav-number">5.0.1.</span> <span class="nav-text">工作中Heartbeat使用场景 - HA高可用</span></a></li></ol></li></ol></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2013 - 2018 Gary Wu All Rights Reserved.</p>
	      
	      
  		   	<p id="copyRightCn">Gary Wu 保留所有权利</p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/scripts.js"></script>




  <script src="/js/dialog.js"></script>














  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            Gary Wu
          </div>
          <div class="panel-body">
            Copyright © 2018 Gary Wu All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
    <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>
  
</body>
</html>