<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>shell编程之bash循环 | Gary Wu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="高级运维shellfor循环while循环until循环select循环break" />
  
  
  
  
  <meta name="description" content="for循环 for循环的基本语法：  for i in item1 item2 ... itemN do    command1   command2   ... done">
<meta name="keywords" content="高级运维,shell,for循环,while循环,until循环,select循环,break">
<meta property="og:type" content="article">
<meta property="og:title" content="Shell编程之Bash循环">
<meta property="og:url" content="https://wuyanteng.github.io/2017/07/24/Shell编程之Bash循环/index.html">
<meta property="og:site_name" content="Gary Wu">
<meta property="og:description" content="for循环 for循环的基本语法：  for i in item1 item2 ... itemN do    command1   command2   ... done">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2017-08-29T12:47:27.835Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shell编程之Bash循环">
<meta name="twitter:description" content="for循环 for循环的基本语法：  for i in item1 item2 ... itemN do    command1   command2   ... done">
  
    <link rel="alternate" href="/atom.xml" title="Gary Wu" type="application/atom+xml">
  

  

  <link rel="icon" href="/css/images/mylogo.jpg">
  <link rel="apple-touch-icon" href="/css/images/mylogo.jpg">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>
  <script src="/js/bootstrap.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    <link rel="stylesheet" href="/css/dialog.css">
  

  

  
    <link rel="stylesheet" href="/css/header-post.css" >
  

  
  
  

</head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  
  <div id="container">
    <div id="wrap">
      
        <header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">
          
          <div class="container"> 
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            
              <a class="brand" style="
                 margin-top: 0px;"  
                href="#" data-toggle="modal" data-target="#myModal" >
                  <img width="124px" height="124px" alt="Hike News" src="/css/images/mylogo.jpg">
              </a>
            
            
            <div class="navbar-collapse collapse">
              <ul class="hnav navbar-nav">
                
                  <li> <a class="main-nav-link" href="/">首页</a> </li>
                
                  <li> <a class="main-nav-link" href="/archives">归档</a> </li>
                
                  <li> <a class="main-nav-link" href="/categories">分类</a> </li>
                
                  <li> <a class="main-nav-link" href="/tags">标签</a> </li>
                
                  <li> <a class="main-nav-link" href="/about">关于</a> </li>
                
                  <li><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(无标题)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div></li>
            </div>
          </div>
                
      </div>
    </div>

</header>



      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-Shell编程之Bash循环" style="width: 75%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      Shell编程之Bash循环
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/07/24/Shell编程之Bash循环/" class="article-date">
	  <time datetime="2017-07-24T12:37:09.000Z" itemprop="datePublished">2017-07-24</time>
	</a>

      
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h4><blockquote>
<p>for循环的基本语法：</p>
</blockquote>
<pre><code>for i in item1 item2 ... itemN
do 
  command1
  command2
  ...
done
</code></pre><a id="more"></a>
<p>在for循环中，每次指定列表中的新值被赋予变量i后，for循环都会执行一次，它将重复运行do和done之间的所有语句，直到条件不满足时为止。</p>
<p>实例：</p>
<pre><code>要求：
①找到已经开启服务   chkconfig --list|grep 3:on
②需要开机自启的服务  crond sshd network rsyslog sysstat
③for循环执行  chkconfig 服务名 off

[root@oldboy202 scripts]#vim services.sh
#/bin/bash
services=`chkconfig --list|grep 3:on |egrep -v &quot;crond|sshd|network|rsyslog|sysstat&quot; |awk &#39;{print $1}&#39;`          #把服务名称通过筛选然后定义一个变量；最后需要反引号进行括起来

for i in $services     #把服务名称列表变量赋值给i变量
do 
  chkconfig $i off     #调用i变量
done

注：变量中如果包含单引号和双引号，那么此变量需要使用反引号括起来，否则会报错。
</code></pre><p>for循环练习1：批量创建10个用户，设置并显示用户随机密码</p>
<pre><code>vim useradd.sh
#/bin/bash

for i in {1..5}           #定义序列并将其赋值给变量i
  do
    useradd gary$i        #创建用户
    pass=`echo $RANDOM|md5sum|cut -c 1-8`   #生成随机密码，并将此赋值给变量pass
    echo $pass |passwd --stdin gary$i       #为用户设置随机密码
    echo $pass                              #显示用户随机密码
done

#################################################################
执行结果：
[root@oldboy202 scripts]# sh useradd.sh 
useradd: user &#39;gary1&#39; already exists
Changing password for user gary1.
passwd: all authentication tokens updated successfully.
47608eed
useradd: user &#39;gary2&#39; already exists
Changing password for user gary2.
passwd: all authentication tokens updated successfully.
5c50971b
useradd: user &#39;gary3&#39; already exists
Changing password for user gary3.
passwd: all authentication tokens updated successfully.
2997217d
useradd: user &#39;gary4&#39; already exists
Changing password for user gary4.
passwd: all authentication tokens updated successfully.
eefdc4c3

注：echo $RANDOM|md5sum|cut -c 1-8可以生成5位随机数字，然后使用md5sum加密，最后通过cut命令获取8位字符
</code></pre><pre><code>扩展：批量删除用户
#!/bin/bash

for i in {1..10}
do
   userdel -r stu$i
   exit 0
done
</code></pre><p>for循环练习2：打印操作系统名称</p>
<pre><code>#!/bin/bash

for linux in Redhat CentOS Gentoo Suse Fedora
  do
    echo &quot;The os is: $linux&quot;  

  done

############################################## 
执行结果：
[root@oldboy202 ~]# sh linux.sh 
The os is: Redhat
The os is: CentOS
The os is: Gentoo
The os is: Suse
The os is: Fedora
</code></pre><p>for循环案例3：如果文件存在，则打印此文件，否则打印一个错误信息。</p>
<pre><code>vim file_check.conf
#!/bin/bash

filenames=&quot;/etc/yp.conf /etc/passwd /etc/shadow /etc/gary.conf&quot;
for file in $filenames
  do
    [[ -f $file ]] &amp;&amp; echo &quot;$file&quot; || echo &quot;Error: $file file not find&quot;     

done

########################################
执行结果
[root@oldboy202 ~]# sh file_check.sh 
Error: /etc/yp.conf file not find
/etc/passwd
/etc/shadow
Error: /etc/gary.conf file not find
</code></pre><p>for 循环案例4：使用命令替换的for循环实例</p>
<pre><code>[root@oldboy202 ~]# vim change.sh
#!/bin/bash

for file in `ls /tmp/*`            #把命令结果赋值给file变量；注：命令外是反引号
  do
  echo $file                       #调用file变量

done

###########################################
执行结果：
[root@oldboy202 ~]# sh change.sh 
Printing file list in /tmp dirctory:
ls /tmp/etc-services-2017-07-05_18.tar.gz /tmp/oldboy.txt /tmp/swap_1000M /tmp/tar.log
</code></pre><p>案例5：for语句倒计时脚本-生成序列</p>
<pre><code>预备知识：
seq 1 10   seq命令用于生成序列
seq -w 10 -1 1  生成倒序数字（每次减一）；-w命令自动使用0补全；
echo -n 意思是不换行
echo -e参数是支持特殊字符
/b 退一格
##########################################################
[root@oldboy202 scripts]# vim daojishi.sh
#/bin/bash
for i in `seq -w 10 -1 1`
  do
   echo -ne &quot;\b\b$i&quot;   #此处需要使用双引号括起来，单引号会报错，因为单引号所见即所得
   sleep 1
done
</code></pre><h4 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h4><blockquote>
<p>while循环用于重复的执行一个命令列表。语法如下：</p>
</blockquote>
<pre><code>while [ 条件 ]
do
   command1
   command2
   ...
   commandN
done

即，当条件CONDITION为真时，command1...commandN命令将被执行。
</code></pre><p>实例：</p>
<pre><code>#!/bin/bash
declare -i var     #定义var为整型变量，目的是让变量值进行加减乘除等计算
var=1
while [[ $var -le 3 ]]   
   do
   echo &quot;The for loop is run $var times.&quot;
   var=$var+1      #数值计算
done

#####################################
执行结果
[root@cm-master scripts]# sh while.sh 
The for loop is run 1 times.
The for loop is run 2 times.
The for loop is run 3 times.
</code></pre><p>案例1：【釜底抽薪法-逐行读取文件】将read命令和while循环来读取一个文本文件</p>
<pre><code>#!/bin/bash
FilePath=$1                      #把位置参数1的值给变量file

if [[ $# -lt 1 ]];then       #判断位置参数个数，如果小于1则打印错误提示并退出，同时返回错误码1
   echo &quot;Usage: $0 FILEPATH.&quot;
   exit 1
fi

while read -r line       #使用read命令从标准输入读取文件的一行，并赋值给变量hang
  do
   echo $line            #打印读入的行

done &lt; &quot;$FilePath&quot;          

注释：我习惯把这种方式叫做read釜底抽薪，因为这种方式在结束的时候需要执行文件，就好像是执行完的时候再把文件读进去一样。

################################
[root@cm-master scripts]# sh while.sh /etc/fstab 

# /etc/fstab
# Created by anaconda on Wed Jul 5 15:52:21 2017
#
# Accessible filesystems, by reference, are maintained under &#39;/dev/disk&#39;
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
#
/dev/mapper/vg_cm5-lv_root / ext4 defaults 1 1
UUID=f1c12bb9-1eb3-4c89-95c9-f8ca8ef1ce88 /boot ext4 defaults 1 2
/dev/mapper/vg_cm5-lv_home /home ext4 defaults 1 2
/dev/mapper/vg_cm5-lv_swap swap swap defaults 0 0
tmpfs /dev/shm tmpfs defaults 0 0
devpts /dev/pts devpts gid=5,mode=620 0 0
sysfs /sys sysfs defaults 0 0
proc /proc proc defaults 0 0
</code></pre><p>案例2：还可以按列读取文件的内容，将文件分为3列输出</p>
<pre><code>#!/bin/bash

FilePath=$1

if [[ $# -lt 1 ]];then
   echo &quot;Usage: $0 FILEPATH.&quot;
fi

while read -r f1 f2 f3       #从文件内读取内容赋值给f1、f2和f3
  do
  echo &quot;第一列: $f1;第二列: $f2;第三列: $f3&quot;    #按照我们预定的格式输出
done &lt; &quot;$FilePath&quot;
##############################
执行结果：
第一列: #;第二列: ;第三列: 
第一列: /dev/mapper/vg_cm5-lv_root;第二列: /;第三列: ext4    defaults   1 1
第一列: UUID=f1c12bb9-1eb3-4c89-95c9-f8ca8ef1ce88;第二列: /boot;第三列: ext4    defaults    1 2
第一列: /dev/mapper/vg_cm5-lv_home;第二列: /home;第三列: ext4    defaults    1 2
第一列: /dev/mapper/vg_cm5-lv_swap;第二列: swap;第三列: swap    defaults    0 0
第一列: tmpfs;第二列: /dev/shm;第三列: tmpfs   defaults   0 0
第一列: devpts;第二列: /dev/pts;第三列: devpts  gid=5,mode=620  0 0
第一列: sysfs;第二列: /sys;第三列: sysfs   defaults    0 0
第一列: proc;第二列: /proc;第三列: proc    defaults    0 0
</code></pre><h6 id="定义无限while循环-又称死循环"><a href="#定义无限while循环-又称死循环" class="headerlink" title="定义无限while循环(又称死循环)"></a>定义无限while循环(又称死循环)</h6><blockquote>
<p>一般当条件永远不被满足时，就会发生一个无限循环。</p>
<p>定义一个无限循环可以使用如下3种命令：</p>
<p>true命令（也可以使用“:”） – 一直表示成功，给定语句将被执行。</p>
<p>false命令 – 不会执行任何语句，脚本/程序将跳转到done语句后的下一行。</p>
</blockquote>
<p>实例1：使用“:” 定义一个无限循环</p>
<pre><code>#!/bin/bash

while :
  do
  echo &quot;Do something...&quot;
  echo &quot;Hit [CTRL+C] to stop!&quot;
  sleep 3    #定义每次循环时间间隔,单位：秒

done
注：“:” 冒号命令是Bash的内部命令，也就意味着其他shell并不支持。
#########################
执行结果：
[root@cm-master scripts]# sh xh.sh 
Do something...
Hit [CTRL+C] to stop!
Do something...
Hit [CTRL+C] to stop!
</code></pre><p>实例2：使用“true” 定义一个无限循环</p>
<pre><code>#!/bin/bash
#!/bin/bash

while true
  do
  echo &quot;Do something...&quot;
  echo &quot;Hit [CTRL+C] to stop!&quot;
  sleep 2       #定义每次循环时间间隔,单位：秒
done
</code></pre><p>实例3：使用while循环显示数字0-9</p>
<pre><code>#!/bin/bash

a=0

while [[ $a -lt 10 ]];do
      echo $a
      a=`expr $a + 1`
done
###############################
执行结果：
[root@cm-master scripts]# sh num.sh 
0
1
2
3
4
5
6
7
8
9
</code></pre><h6 id="expr手工命令计数器"><a href="#expr手工命令计数器" class="headerlink" title="expr手工命令计数器"></a>expr手工命令计数器</h6><pre><code class="shell">expr命令一般用于整数值，但也可用于字符串。
expr的常用运算符： 
加法运算：+ 
减法运算：- 
乘法运算：\* 
除法运算：/ 

比如：
$ expr 10 + 10
20
$ expr 5 \* 6
30
$ expr 30 / 3
10
$ expr 30 / 3 / 2
5
(注意运算符左右都有空格)
使用乘号时，必须用反斜线屏蔽其特定含义。因为shell可能会误解显示星号的意义
</code></pre>
<p>实例4：编写菜单驱动程序</p>
<pre><code>#!/bin/bash

while true
do

  clear
  echo &quot;======================&quot;
  echo &quot;    MAIN - 菜单    &quot;
  echo &quot;======================&quot;
  echo &quot;1. 显示日期与时间.&quot;
  echo &quot;2. 显示系统信息.&quot;
  echo &quot;3. 显示用户正在做什么.&quot;
  echo &quot;4. Exit.&quot;

read -p &quot;Enter your choice [1-4]：&quot; choice
  case $choice in
         1)
         echo &quot;Today is $(date +%Y-%m-%d).&quot;
         echo &quot;Current time: $(date +%H:%M:%S)&quot;
         read -p &quot;Press [Enter] key to continue...&quot; readEnterkey
         ;;

         2)
         uname -a
         read -p &quot;Press [Enter] key to continue...&quot; readEnterkey
         ;;

         3)
          w
          read -p &quot;Press [Enter] key to continue...&quot; readEnterkey
          ;;

         4)
          echo &quot;Bye!&quot;
          exit 0
          ;;

         *)
         echo &quot;Error: Invalid option!&quot;
         read -p &quot;Press [Enter] key to continue...&quot; readEnterkey
         ;;

    esac
done

###################################################################
执行结果：
======================
    MAIN - 菜单    
======================
1. 显示 日期与时间.
2. 显示系统信息.
3. 显示用户正在做什么.
4. Exit.
Enter your choice [1-4]：3
 19:01:53 up 6 days,  4:20,  1 user,  load average: 0.27, 0.13, 0.07
USER     TTY      FROM              LOGIN@   IDLE   JCPU   PCPU WHAT
root     pts/0    10.255.255.1     15:37    0.00s  0.05s  0.00s sh menu.sh
Press [Enter] key to continue...
</code></pre><h4 id="until循环"><a href="#until循环" class="headerlink" title="until循环"></a>until循环</h4><blockquote>
<p>until循环与while循环类似，也同样基于一个条件。但util循环的判断条件正好与while循环的判断条件相反。</p>
<p>until循环在条件为假的情况下才会继续运行;  一旦条件被满足，即为真，就会退出循环。</p>
</blockquote>
<pre><code>until [ CONDITION ]
do
  command1
  command2
  ......
done
</code></pre><p>until循环与while循环相比：</p>
<ul>
<li>until循环执行直到返回0的状态就退出，因为0表示为真。</li>
<li>while循环执行知道返回非0状态就退出，因为非0表示为假。</li>
<li>until循环总是执行至少一次。</li>
</ul>
<p>实例：</p>
<pre><code>#!/bin/bash

var=1
until [ $var -gt 5 ]
do
   echo &quot;The for loop is run $var times.&quot;
   var=$(( var+1 ))
done

##########################
执行结果：
[root@CactiEZ ~]# sh until.sh 
The for loop is run 1 times.
The for loop is run 2 times.
The for loop is run 3 times.
The for loop is run 4 times.
The for loop is run 5 times.

脚本会被执行5次，第6次条件被满足，则退出until循环。
</code></pre><h4 id="select循环语句"><a href="#select循环语句" class="headerlink" title="select循环语句"></a>select循环语句</h4><blockquote>
<p>bash还提供select循环，其语法如下所示：</p>
</blockquote>
<pre><code>select VAR in LIST
do
  command1
  command2
  ......
done
</code></pre><p>select循环语句具有如下特点：</p>
<ul>
<li>select语句使用Bash内部变量PS3的值作为它的提示信息。</li>
<li>打印到屏幕上的列表LIST中的每一项会在前面加上一个数字编号</li>
<li>当用户输入数字与某一个数字编号一致时，列表中相应的项即被赋予给变量VAR。</li>
<li>如果用户的内容为空，将重新显示列表LIST中的项和提示符信息。</li>
<li>可以通过添加一个退出选项，或按Ctrl+C或 Ctrl+D组合键退出select循环。</li>
</ul>
<p>实例：</p>
<pre><code>#!/bin/bash

PS3=&quot;Run command: &quot;   #定义PS3提示符
select choice in date w hostname &quot;uname -a&quot; Exit    #指定select循环列表

do 
  case $choice in
    date)
        echo &quot;===============================&quot;
        echo &quot;Current system date and time: &quot;
        echo &quot;===============================&quot;
        $choice        #直接将变量的值作为命令运行
        ;;
      w)
        echo &quot;==========================================&quot;
        echo &quot;Who is logged on and what they are doing: &quot;
        echo &quot;==========================================&quot;
        $choice
        ;;    
hostname)
        echo &quot;==========&quot;
        echo &quot;Hostname: &quot;
        echo &quot;==========&quot;
        $choice
        ;;
&quot;uname -a&quot;)
        echo &quot;====================&quot;
        echo &quot;System information: &quot;
        echo &quot;====================&quot;
        $choice
        ;;
    Exit)
        echo &quot;Bye!&quot;
        exit
        ;;

  esac

done
</code></pre><p>执行结果</p>
<pre><code>[root@CactiEZ ~]# sh select.sh 
1) date
2) w
3) hostname
4) uname -a
5) Exit
Run command: 1
===============================
Current system date and time: 
===============================
Wed Aug 23 16:43:49 CST 2017
Run command: 5
Bye!
</code></pre><h2 id="循环控制"><a href="#循环控制" class="headerlink" title="循环控制"></a>循环控制</h2><blockquote>
<p>break和continue是Bash中的循环控制命令，其用法与在其他编程语言中的同名语句完全一致。</p>
</blockquote>
<h4 id="break语句"><a href="#break语句" class="headerlink" title="break语句"></a>break语句</h4><blockquote>
<p>作用：break语句用于从for、while、until或select循环中退出，停止循环。</p>
</blockquote>
<p>break语句的语法如下：</p>
<pre><code>break [n]

n代表嵌套循环的层级，如果指定了n, break 将退出n级嵌套循环。如果没有指定或n不≥1，则退出状态码0，否则退出状态码为n.
</code></pre><p>实例：</p>
<pre><code>#!/bin/sh

#如果未指定参数，则打印脚本的使用方法，并返回退出状态码1
[ $# -eq 0 ] &amp;&amp; { echo &quot;Usage: sh $0 file path&quot;; exit 1; }

#将位置1的值献给变量match
match=$1
found=0

#遍历目录/etc下的所有文件
for file in /etc/*
do
#如果文件的路径与指定的参数文件路径相匹配，则打印文件已找到，并退出for循环
  if [ $file == &quot;$match&quot; ];then
     echo &quot;The file $match was found!&quot;
     found=1
     #使用break退出for循环
     break

  fi

done

[ $found -ne 1 ] &amp;&amp; echo &quot;the $match not found in /etc directory.&quot;
</code></pre><p>执行结果：</p>
<pre><code>[root@CactiEZ ~]# sh break1.sh /etc/passwd
The file /etc/passwd was found!

[root@ ~]# sh break1.sh /etc/shadow
The file /etc/shadow was found!

[root@ ~]# sh break1.sh /etc/kkk
the /etc/kkk not found in /etc directory.
</code></pre><p>实例2：使用break n语句退出嵌套循环</p>
<pre><code>#!/bin/bash

#如果未指定参数，则打印脚本的使用方法，并返回退出状态码1
[[ $# -eq 0 ]] &amp;&amp; { echo &quot;Usage: $0 command&quot;; exit 1; }

#将位置参数1的值赋给变量match
match=$1
found=0

for dir in /bin /usr/bin
do

  #遍历目录下的所有文件
  for file in $dir/*
  do
     #如果文件名与指定的参数文件名相匹配，则打印命令已找到，并退出嵌套的for循环。
     if [[ $(basename $file) == &quot;$match&quot; ]];then
       echo &quot;The command $match was found!&quot;
       found=1
       #退出两层的for循环
       break 2
     fi

  done

done

[[ $found -ne 1 ]] &amp;&amp; echo &quot;The command $match not found.&quot; 
</code></pre><p>测试</p>
<pre><code>[root@openvpn2]# cd /bin
[root@openvpn2 bin]# sh /opt/break.sh arch
The command arch was found!
</code></pre><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><blockquote>
<p>什么叫shell循环？</p>
</blockquote>
<pre><code>shell 可以重复的执行特定指令，直到特定的条件被满足为止。这重复执行的一组命令就叫做循环。
</code></pre><blockquote>
<p>shell循环特点</p>
</blockquote>
<pre><code>循环条件中使用的变量必须是已初始化的，然后再循环中开始执行；在每一次循环开始时进行一次测试，重复的执行一个代码块。
</code></pre><blockquote>
<p>for循环总结</p>
</blockquote>
<pre><code>在for循环中，每次指定列表中的新值被赋给变量VAR后，for循环都会执行一次，它将重复运行do和done之间的所有语句，直到条件不满足时为止。
</code></pre><blockquote>
<p>while循环总结</p>
</blockquote>
<pre><code>1) while循环语句用于重复的执行一个命令列表
2) while循环可以与read命令结合使用来读取一个文本文件
3）while循环和专用命令&quot;:&quot;结合使用来定义一个无限循环

定义一个无限循环可以使用3种命令：true命令、false命令和&quot;:&quot; 命令。
</code></pre><blockquote>
<p>until循环总结</p>
</blockquote>
<pre><code>until循环与while循环类似，也同样基于一个条件。但until循环的判断条件正好与while循环的判断条件相反，until循环在条件为假的情况下才会持续的运行。一旦条件被满足，即为真，就会退出循环。
</code></pre><blockquote>
<p>select循环总结</p>
</blockquote>
<pre><code>1) select语句使用Bash内置变量PS3的值作为它的提示符信息
2）打印到屏幕上的列表LIST中的每一项会在前面加上一个数字编号
3）当用户输入的数字与某一个数字编号一致时，列表中相应的项即被赋予变量VAR
4）如果用户输入的为空，将重新显示列表LIST中的项和提示符信息。
5）可以通过添加一个退出选项，或按Ctrl+C或Ctrl+D组合键退出select循环
</code></pre><blockquote>
<p>break控制命令总结</p>
</blockquote>
<pre><code>break是Bash中的循环控制命令，break语句用于从for、while、until或select循环中退出，停止循环的执行。使用break n将退出n级嵌套循环。

注：break的英文意思是“打破”，即打破n级嵌套循环
</code></pre>
      
    </div>
    <footer class="article-footer">
      
      
        
	<div id="comment">
		<!-- 来必力City版安装代码 -->
		<div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5">
		<script type="text/javascript">
		   (function(d, s) {
		       var j, e = d.getElementsByTagName(s)[0];

		       if (typeof LivereTower === 'function') { return; }

		       j = d.createElement(s);
		       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
		       j.async = true;

		       e.parentNode.insertBefore(j, e);
		   })(document, 'script');
		</script>
		<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
		</div>
		<!-- City版安装代码已完成 -->
	</div>



      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/break/">break</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/for循环/">for循环</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/select循环/">select循环</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/">shell</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/until循环/">until循环</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/while循环/">while循环</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/高级运维/">高级运维</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/07/29/期中架构-流程图/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          期中架构-流程图
        
      </div>
    </a>
  
  
    <a href="/2017/07/19/shell if语句-条件执行/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">shell if语句-条件执行</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="toc-sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    
        <ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#for循环"><span class="nav-number">1.</span> <span class="nav-text">for循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#while循环"><span class="nav-number">2.</span> <span class="nav-text">while循环</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#定义无限while循环-又称死循环"><span class="nav-number">2.0.1.</span> <span class="nav-text">定义无限while循环(又称死循环)</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#expr手工命令计数器"><span class="nav-number">2.0.2.</span> <span class="nav-text">expr手工命令计数器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#until循环"><span class="nav-number">3.</span> <span class="nav-text">until循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#select循环语句"><span class="nav-number">4.</span> <span class="nav-text">select循环语句</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#循环控制"><span class="nav-number"></span> <span class="nav-text">循环控制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#break语句"><span class="nav-number">1.</span> <span class="nav-text">break语句</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结"><span class="nav-number"></span> <span class="nav-text">总结</span></a>
    
    </div>
  </aside>
</section>
        
      </div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2013 - 2018 Gary Wu All Rights Reserved.</p>
	      
	      
  		   	<p id="copyRightCn">Gary Wu 保留所有权利</p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/scripts.js"></script>




  <script src="/js/dialog.js"></script>














  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            Gary Wu
          </div>
          <div class="panel-body">
            Copyright © 2018 Gary Wu All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
    <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>
  
</body>
</html>